#! /usr/bin/env tclsh

source $::env(HOME)/bin/lib.tcl

need swaymsg notify-send

set dev_std {1:1:AT_Translated_Set_2_keyboard}
set dev_bow {1256:28705:B.O.W_Keyboard}

set arg [lindex $::argv 0]
switch -- $arg {
  h - hsnt {
    set arg hsnt
    exec swaymsg "input $dev_std xkb_layout hsnt"
  }
  q - qwerty {
    set arg qwerty
    exec swaymsg "input $dev_std xkb_layout us"
    exec swaymsg "input $dev_std xkb_options ctrl:nocaps"
  }
  b - bow {
    set arg bow
    exec swaymsg "input $dev_bow xkb_layout bow"
  }
  default {
    fail "Usage: $ME h_snt|q_werty|b_ow"
  }
}

exec notify-send -u low -t 2000 -i input-keyboard key $arg

