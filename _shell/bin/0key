#! /usr/bin/env tclsh

source "$::env(HOME)/bin/lib.tcl"

need swaymsg notify-send

set dev {1:1:AT_Translated_Set_2_keyboard}
set arg [lindex $::argv 0]
set re_planck {^Planck$}

switch -- $arg {
  hsnt {
    exec swaymsg "input $dev xkb_layout hsnt"
    exec swaymsg "input $dev xkb_options ctrl:nocaps"
  }

  qwerty {
    exec swaymsg "input $dev xkb_layout us"
    exec swaymsg "input $dev xkb_options ctrl:nocaps"
  }

  bow {
    exec swaymsg "input $dev xkb_options bow:nocaps_esc_grave_alt"
  }
}

#exec xset r rate 300 30

exec notify-send -u low -t 2000 -i input-keyboard key $arg

